<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="main/kinetic-v2.3.0.js"></script>
<script src="main/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="main/jquery.mobile-1.0.min.js"></script>
<script type="text/javascript" src="main/drag.js"></script>
<script type="text/javascript" src="main/main.js"></script>
<link type="text/css" href="css/main.css" type="text/css" rel="stylesheet" />
<title>圣诞礼物</title>
<script>
var num = 0;
var isMove = false;
$(function(){
	showPoints();
	function goRight(){
		if(isMove){
			return;
		}
		if(num <= 0){
			return;
		}
		isMove = true;
		$(".choose .choose_tree .tree ul").animate({marginLeft:"+=420"}, {complete:function(){
			num--;
			showPoints();
			isMove = false;
		}});
	}

	function goLeft(){
		if(isMove){
			return;
		}
		if(num >= $('.choose .choose_tree li').length-1){
			return;
		}
		isMove = true;
		$(".choose .choose_tree .tree ul").animate({marginLeft:"-=420"}, {complete:function(){
			num++;
			showPoints();
			isMove = false;
		}});
	}

	$('.choose .choose_tree .left').click(goRight);

	$('.choose .choose_tree .right').click(goLeft);

	$('.choose .choose_tree .tree').bind( "swiperight", goRight);

	$('.choose .choose_tree .tree').bind( "swipeleft", goLeft);

	$('.choose .choose_tree .left').bind( "touchstart", goRight);

	$('.choose .choose_tree .right').bind( "touchstart", goLeft);

	function showPoints(){
		var total = $('.choose .choose_tree li').length;
		var arrayTmp = [];
		for(var i =0 ;i<total;i++){
			if(num == i){
				arrayTmp.push('<img src="images/choose/point_white.png">');
			}
			else{
				arrayTmp.push('<img src="images/choose/point_yellow.png">');
			}
		}
		var str = arrayTmp.join('');

		$('.points').html(str);
	}

});
</script>
</head>
<body>
<div class="choose">
	<div class="choose_tree">
		<div class="left"><img src="images/choose/left.png"></div>
		<div class="tree" onclick="window.location.href = 'editor.html';">
		<ul>
			<li id="a">
				<video width="311" height="398" autoplay loop="loop">
					<source src="new_static/c_tree_a.mp4" type="video/mp4" />
				</video>
			</li>
			<li id="b">
				<video width="311" height="398" autoplay loop="loop">
					<source src="new_static/c_tree_b.mp4" type="video/mp4" />
				</video>				
			</li>
			<li id="c">
				<video width="311" height="398" autoplay loop="loop">
					<source src="new_static/c_tree_c.mp4" type="video/mp4" />
				</video>
			</li>
			
		</ul>
		</div>
		<div class="right"><img src="images/choose/right.png"></div>
	</div>
	<div class="points"></div>
</div>
<script>
$("video").each(function(){
	$(this)[0].play();
})
if(navigator.userAgent.indexOf('iPad') > 0 || navigator.userAgent.indexOf('iPhone') > 0){
	$("#a").html('<img src="new_static/c_tree_a_pic.png">');
}
if(navigator.userAgent.indexOf('iPad') > 0 || navigator.userAgent.indexOf('iPhone') > 0){
	$("#b").html('<img src="new_static/c_tree_b_pic.png">');
}
if(navigator.userAgent.indexOf('iPad') > 0 || navigator.userAgent.indexOf('iPhone') > 0){
	$("#c").html('<img src="new_static/c_tree_c_pic.png">');
}
</script>

</body>
</html>